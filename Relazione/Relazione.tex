\documentclass[12pt]{article}
\usepackage[italian]{babel}
\usepackage{graphicx}
\usepackage{titling}
\usepackage{multicol}
\usepackage{titlesec}
\usepackage{hyperref} %To setup table of content links
\usepackage{amssymb}
%\usepackage{changepage}
\usepackage{geometry} %To modify margins


 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }

\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}


%=========================================
\begin{document}


\begin{titlepage}
   \begin{center}
       \vspace*{1cm}
 
	\large
      {\huge \textbf{Elaborato ESI Stabilizzazione video} }
 
       \vspace{1.5cm}
 
       \textbf{Nicolò Fretti - Stefano Nicolis}\\
	\textbf{A.A. 2020-2021}\\
	\vspace{0.35cm}
	\textbf{\today}

\vfill
\begin{figure}[h!]
	\begin{center}
	  \includegraphics[height=6cm, width=6cm]{media/logounivr}
	\end{center}
\end{figure}
 
	\vfill
 	\textbf{Corso di \\
       Elaborazioni dei Segnali e Immagini\\}
 
       \vspace{3cm}
 
      \begin{multicols}{2}
      \textbf{Università degli Studi di Verona\\
	 Dipartimento di Informatica}
	\end{multicols}
 
   \end{center}
\end{titlepage}


\tableofcontents

\clearpage

\section{Introduzione}
Viene richiesta la progettazione del codice MatLab per la stabilizzazione un video. Quest'ultima, preso in input un video, deve operare sulla traslazione e rotazione dello stesso in modo da stabilizzarlo secondo un'ancora, ovvero una porzione di video selezionata dall'utente.

TODO abbiamo provato x y ma alla fine abbiamo scelto z spiegato dopo

\section{Approccio utilizzato}
L'operazione che rende possible la stabilizzazione è la cross-corellazione, che, intuitivamente, permette di scorrere un determinato template su un'immagine di riferimento per andare a evidenziare la posizione in cui il template è più simile all'immagine.

L'algoritmo, presa in input l'ancora, esegue su ogni frame le seguenti operazioni:
\begin{itemize}
\item ricerca e applicazione dell'angolo di rotazione sul frame attuale
\item cross-correlazione tra ancora e frame ruotato per ricavare l'offset
\item traslazione del frame in base all'offset ricavato
\end{itemize}

\subsection{Ricerca angolo di rotazione}
La ricerca di un angolo viene fatta ruotando il frame di un certo angolo alpha per poi applicare una \texttt{normxcorr()} tra il frame e l'ancora.
Per la selezione dell'angolo migliore vengono eseguite due passate di ricerca sul frame, nella prima passata viene fatta una ricerca `grossolana', ovvero ricerchiamo l'angolo verificando il valore di cross correllazione ad intervalli



TODO spiegare widgets UI

Nella prima passata viene fatta una ricerca un'angolo iniziale




trovare la differenza di posizione e rotazione della porzione di frame corrente contenente la caratteristica da tracciare rispetto all'ancora. Trovate queste due informazioni, al frame attuale vengono applicate le trasformazioni inverse. Ripetendo queste operazioni per ogni frame il risultato è un video che presenta l'ancora al centro del frame, stabile rispetto a traslazione e rotazione.
È stato scelto di stabilizzare l'ancora al centro del frame, in maniera tale da notare meglio la stabilizzazione rispetto alla porzione di video selezionata.

Gli spazi vuoti lasciati dall'imagine traslata vengono riempiti di nero.

\section{Considerazioni finali}
\end{document}